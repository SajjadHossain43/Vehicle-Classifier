<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload & Send to Gradio</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 20px; }
        img { max-width: 100%; height: auto; margin-top: 10px; }
        #response { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <h2>Upload a Photo & Send to Hugging Face Gradio</h2>
    
    <input type="file" id="upload" accept="image/*">
    <img id="preview" style="display:none; max-width: 300px;"/>
    <button id="send" style="display:none;">Send to Gradio</button>
    <p id="response"></p>

    <script>
        const upload = document.getElementById('upload');
        const preview = document.getElementById('preview');
        const sendBtn = document.getElementById('send');
        const responseText = document.getElementById('response');

        let base64Image = "";

        // Handle image preview
        upload.addEventListener('change', (event) => {
            debugger;
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    base64Image = e.target.result.split(',')[1]; // Remove data URL prefix
                    preview.style.display = 'block';
                    sendBtn.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });

        // Send image to Gradio API
        sendBtn.addEventListener('click', async () => {
            debugger;
            sendBtn.disabled = true;
            responseText.innerText = "Processing...";

            const response = await fetch("https://Sajjad43-vehicle-classifier.hf.space/run/predict", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ image: base64Image })
            });

            const result = await response.json();
            responseText.innerText = "Response: " + JSON.stringify(result);
            sendBtn.disabled = false;
        });
    </script>
</body>
</html>
